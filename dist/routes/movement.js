"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var _express=require("express"),_express2=_interopRequireDefault(_express),_models=require("../models/"),_models2=_interopRequireDefault(_models),_configuration=require("../models/configuration"),_configuration2=_interopRequireDefault(_configuration),_parse=require("../helpers/parse"),_parse2=_interopRequireDefault(_parse),router=_express2["default"].Router();router.get("/",function(e,t){console.log("GET movement/"),_models2["default"].find({}).sort("-ugly_date").exec(function(e,o){return e?t.sendStatus(500).json(e):void t.json(o)})}),router.post("/",function(e,t){console.log("POST movement/");var o=new Date,r=o.getDate(),n=o.getMonth(),u=o.getFullYear(),s=o.getHours(),i=o.getMinutes(),a=o.getSeconds(),d=r+" / "+n+" / "+u,l=s+":"+i+":"+a;_models2["default"].create({full_date:d,full_time:l,date:[{day:r,month:n,year:u}],time:[{hours:s,minutes:i,seconds:a}]},function(e,o){return e?t.sendStatus(500).json(e):(_configuration2["default"].find({username:"MauricioDinki"},function(e,o){return e?t.sendStatus(500).json(e):void(o[0].notifications&&(0,_parse2["default"])("Movement Detected","Push Sended"))}),void t.json(o))})}),exports["default"]=router;